<head>
  <style type="text/css">
      svg{ overflow:visible !important; } /*easier than trying to size the SVG element right*/
  </style>
</head>
<body>
  <h1>A Visualization of the "Slides" in This Presentation</h1>
  <div id="graph"></div>
  <script type="text/javascript" src="http://underscorejs.org/underscore-min.js"></script>
  <script type="text/javascript" src="https://rawgithub.com/anvaka/VivaGraphJS/master/dist/vivagraph.min.js"></script>
  <script type="text/coffeescript">
    window.ObjectGraph = (rootId, nodes, nodeLinks)->
      graph = Viva.Graph.graph()

      _.each nodes, (node, node_id)->
        graph.addNode node_id, node

      _.each nodeLinks, (nodeLinkList, key)->
        _.each nodeLinkList, (nodeLink)->
          graph.addLink(key, nodeLink)

      graphics = Viva.Graph.View.svgGraphics()
      graphics.node (node)-> #build the node element from SVG and HTML components
        fillColor = if node.data.id == rootId then 'red' else 'blue'
        svg = Viva.Graph.svg('svg')
        g = svg.appendChild Viva.Graph.svg('g')
        g.appendChild Viva.Graph.svg('rect').attr('width', 10).attr('height', 10).attr('fill', fillColor)

        #foreign element sizeing could be done a lot better than what I have here
        foreignOject = g.appendChild Viva.Graph.svg('foreignObject').attr('width', '10em').attr('height', '1em').attr('fill', fillColor)
        body = foreignOject.appendChild document.createElementNS('http://www.w3.org/1999/xhtml', 'body')
        div = body.appendChild document.createElement('div')
        div.appendChild(document.createElement 'span' ).textContent = node.data.name
        svg

      layout = Viva.Graph.Layout.forceDirected graph,
        springLength : 10
        springCoeff  : 0.000005
        dragCoeff    : 0.02
        gravity      : -10

      renderer = Viva.Graph.View.renderer graph, 
        graphics  : graphics 
        layout    : layout 
        container : document.getElementById('graph')

      renderer.run()
  </script>
  <script type="text/javascript" src="http://jashkenas.github.io/coffee-script/extras/coffee-script.js"></script>

  <script type="text/javascript">
    setTimeout( function() {
        json = {"rootId":"t1","edges":{"n3i":["p01","p02","p03","g03","toc"],"p01":["p03","p02","p03","p02"],"p03":[],"p02":[],"g03":["g02","g02"],"g02":["g03","g03"],"toc":["n2","hh1","tt1","mg1","n2","hh1","tt1","mg1"],"n2":["n3a","n3a"],"n3a":["n3b","n3e","n3b","n3e"],"n3b":["n3d","n3d"],"n3d":["n3f","n3f"],"n3f":["n3g","n3g"],"n3g":["g01","n3h","n3e","g01","n3h","n3e"],"g01":[],"n3h":[],"n3e":["p01","g02","n3i","p01","g02","n3i"],"hh1":["hh2","hh2"],"hh2":["hh3","hh3"],"hh3":["hh4","p02","p01","hh4","p02","p01"],"hh4":["hh5","p04","hh6","hh5","p04","hh6"],"hh5":["hh6","hh7","g03","g02","hh8","hh6","hh7","g03","g02","hh8"],"hh6":["hh7","hh8","hh7","hh8"],"hh7":["hh8","hh8"],"hh8":["hh9","hh9"],"hh9":["hha","hha"],"hha":["toc","hhb","toc","hhb"],"hhb":["hhc","hhc"],"hhc":["toc","toc"],"p04":[],"tt1":["tt2","tt2"],"tt2":["tt3","tt3"],"tt3":["tt4","tt4"],"tt4":["tt5","tt5"],"tt5":["p01","toc","p01","toc"],"mg1":["mg2","mg2"],"mg2":["mg3","mg3"],"mg3":["mg4","mg4"],"mg4":["mg5","mg5"],"mg5":["mg6","mg6"],"mg6":["mga","mg7","mga","mg7"],"mga":["mg7","g04","toc","mg7","g04","toc"],"mg7":["mg8","mg8"],"mg8":["mg9","mg9"],"mg9":["mga","mgb","mga","mgb"],"mgb":["mga","mga"],"g04":["p02","mga","p02","mga"],"t2":["toc"],"n0":["t2"],"cm":["n0"],"cl":["cm"],"t1":["cl"]},"nodes":{"n3i":{"id":"n3i","name":"I can haz movie?"},"p01":{"id":"p01","name":"When to Spawn, when to back-whack"},"p03":{"id":"p03","name":"Streams of Text"},"p02":{"id":"p02","name":"| Pipelining |"},"g03":{"id":"g03","name":"Access the Bytes in Ruby"},"g02":{"id":"g02","name":"Working with Bytes"},"toc":{"id":"toc","name":"Keep learning"},"n2":{"id":"n2","name":"Face detection in ruby"},"n3a":{"id":"n3a","name":"A simple program to detect faces"},"n3b":{"id":"n3b","name":"Have OpenCV do the composition"},"n3d":{"id":"n3d","name":"Learning How to learn OpenCV in Ruby"},"n3f":{"id":"n3f","name":"What documentation is available?"},"n3g":{"id":"n3g","name":"Grep the source like a boss"},"g01":{"id":"g01","name":"What's 'arity'?"},"n3h":{"id":"n3h","name":"Writing Ruby-c extensions"},"n3e":{"id":"n3e","name":"I can haz live image?"},"hh1":{"id":"hh1","name":"Hardware hacking: building keg-motron"},"hh2":{"id":"hh2","name":"Description of a hareware project: Kegmotron"},"hh3":{"id":"hh3","name":"The webserver"},"hh4":{"id":"hh4","name":"The xbee-hex.rb program"},"hh5":{"id":"hh5","name":"Formatting the data"},"hh6":{"id":"hh6","name":"What about the _actual hardware_"},"hh7":{"id":"hh7","name":"The one thing you need to know about electronics"},"hh8":{"id":"hh8","name":"Pretty it all up"},"hh9":{"id":"hh9","name":"Modifications to xbee-hex.rb"},"hha":{"id":"hha","name":"Wrap it up"},"hhb":{"id":"hhb","name":"Programming the XBee"},"hhc":{"id":"hhc","name":"No, really, show us"},"p04":{"id":"p04","name":"What's UDP?"},"tt1":{"id":"tt1","name":"The presentation about this presentation"},"tt2":{"id":"tt2","name":"How does it work?"},"tt3":{"id":"tt3","name":"How do you stop mistakes?"},"tt4":{"id":"tt4","name":"Show me that graph!"},"tt5":{"id":"tt5","name":"Ok, but how are you changing the backround"},"mg1":{"id":"mg1","name":"Build a multiplayer, realtime game"},"mg2":{"id":"mg2","name":"Let's get started"},"mg3":{"id":"mg3","name":"Back to Menu"},"mg4":{"id":"mg4","name":"But first"},"mg5":{"id":"mg5","name":"The Spec, what it do"},"mg6":{"id":"mg6","name":"An Outline, how it do it"},"mga":{"id":"mga","name":"Let's play it"},"mg7":{"id":"mg7","name":"The Server - Listen Loop"},"mg8":{"id":"mg8","name":"The Server - Cacluation Loop"},"mg9":{"id":"mg9","name":"The Client - Cacluation Loop"},"mgb":{"id":"mgb","name":"The Client - Rendering"},"g04":{"id":"g04","name":"kill pipe, wat?!"},"t2":{"id":"t2","name":"Get Started"},"n0":{"id":"n0","name":"The Beginning"},"cm":{"id":"cm","name":"CoverMySlide"},"cl":{"id":"cl","name":"CoverMySlide"},"t1":{"id":"t1","name":"The Title Screen"}}}
        ObjectGraph(json.rootId, json.nodes, json.edges);
      }, 1000 );
  </script>
</body>
